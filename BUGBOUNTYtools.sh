#!/bin/bash
#@brunosgio

bold=`tput bold` 
red=`tput setaf 1`
green=`tput setaf 2`
yellow=`tput setaf 3`
purple=`tput setaf 5`
cyan=`tput setaf 6`
reset=`tput sgr0`

tput civis

function ctrl_c(){
    echo -e "${bold}${red}\n[!] Ctrl + C pressed. Script ended...${reset}\n"
    tput cnorm; exit 1
}
trap ctrl_c INT

function banner(){
    echo -e """${bold}${cyan}
.__       .__           ,    .___.      .   
[__). . _ [__) _ . .._ -+-  .  |   _  _ | __
[__)(_|(_][__)(_)(_|[ ) | \_|  |  (_)(_)|_) 
       ._|                ._|               
${reset}${yellow}\t\t\t\t @brunosgio${reset}"""
}

function working_environment(){
    echo "${bold}${purple}[+] Starting Bug Bounty Tools installation. This could take a while...${reset}"
    echo
    sleep 3;
    echo "${bold}${purple}[+] Setting up the working environment...${reset}"
    mkdir -p /root/go/bin && mkdir /root/tools
    echo
}

function system_update(){
    echo "${bold}${purple}[+] Updating the system...${reset}"
    apt list --upgradable
    dpkg --configure -a
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y && apt full-upgrade -y && apt autoremove -y && apt autoclean -y
    clear
}

function essential_programs(){
    echo "${bold}${green}[+] Installing essential programs...${reset}"
    sleep 2;
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y build-essential apt-utils sudo locate vim nano tmux wget curl whois host xclip upx netcat traceroute tor proxychains prips awscli ftp ssh
    clear
}

function utilities_and_libraries(){
    echo "${bold}${green}[+] Installing utilities and libraries...${reset}"
    sleep 2;
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y libpcap-dev pv net-tools dnsutils iputils-ping libldns-dev libssl-dev libffi-dev libxml2-dev libxslt1-dev zlib1g-dev libgmp-dev libcanberra-gtk* libgl1-mesa-dri libgl1-mesa-glx libpangox-1.0-0 libpulse0 libv4l-0 fonts-symbola apt-transport-https xvfb x11-xserver-utils ca-certificates
    clear
}

function development_tools(){
    echo "${bold}${green}[+] Installing development tools...${reset}"
    sleep 2;
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y golang python3 python3-pip python3-dev gcc cmake ruby openjdk-11-jdk-headless git dpkg unrar zip
    curl https://sh.rustup.rs -sSf | sh -s -- -y
    clear
}

function environment_variables(){
    echo "${bold}${purple}[+] Setting environment variables...${reset}"
    sleep 2;
    export GOPATH=/root/go
    export PATH=$GOPATH/bin:$PATH
    export GO111MODULE=on
    source /root/.cargo/env
    clear
}

function gui_tools(){
    echo "${bold}${green}[+] Installing GUI tools...${reset}"
    sleep 2;
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y burpsuite chromium firefox-esr zaproxy
    clear
}

function apt_tools(){
    echo "${bold}${green}[+] Installing apt tools...${reset}"
    sleep 2;
 
    # Brutespray
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y brutespray
  
    # CeWL
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y cewl
  
    # Jq
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y jq
  
    # Knockpy
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y knockpy
  
    # Masscan
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y masscan
 
    # Nmap
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y nmap
  
    # Prips
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y prips
   
    # SecLists
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y seclists
  
    # SQLMap
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y sqlmap
    
    # Sublist3r
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y sublist3r
    
    # Wafw00f
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y wafw00f
    
    # Wfuzz
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y wfuzz

    # WhatWeb
    apt-get update && DEBIAN_FRONTEND=noninteractive apt-get -qq install -y whatweb

    clear
}

function pip_tools(){
    echo "${bold}${green}[+] Installing pip3 tools...${reset}"
    sleep 2;
    
    # AltDNS
    pip3 install py-altdns

    # Anubis
    pip3 install anubis-netsec

    # Arjun
    pip3 install arjun

    # Dirhunt
    pip3 install dirhunt

    # Goop
    pip3 install goop

    # Shodan
    pip3 install shodan

    clear
}

function go_tools(){
    echo "${bold}${green}[+] Installing golang tools...${reset}"
    sleep 2;

    # Amass
    go get -u -v -ldflags="-s -w" github.com/OWASP/Amass/v3/...@latest

    # Anew
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/anew@latest

    # Anti-burl
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/anti-burl@latest

    # ApkURLgrep
    go get -u -v -ldflags="-s -w" github.com/ndelphit/apkurlgrep@latest

    # Assetfinder
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/assetfinder@latest

    # CF-check
    go get -u -v -ldflags="-s -w" github.com/dwisiswant0/cf-check@latest

    # Chaos
    go get -u -v -ldflags="-s -w" github.com/projectdiscovery/chaos-client/cmd/chaos@latest

    # Comb
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/comb@latest

    # Dalfox
    go get -u -v -ldflags="-s -w" github.com/hahwul/dalfox/v2@latest

    # Dirdar
    go get -u -v -ldflags="-s -w" github.com/m4dm0e/dirdar@latest

    # DNSx
    go get -u -v -ldflags="-s -w" github.com/projectdiscovery/dnsx/cmd/dnsx@latest

    # FFF
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/fff@latest

    # Filter-resolved
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/filter-resolved@latest

    # Fuff
    go get -u -v -ldflags="-s -w" github.com/ffuf/ffuf@latest

    # Gau
    go get -u -v -ldflags="-s -w" github.com/lc/gau@latest

    # Gauplus
    go get -u -v -ldflags="-s -w" github.com/bp0lr/gauplus@latest

    # GetJS
    go get -u -v -ldflags="-s -w" github.com/003random/getJS@latest

    # Get-Title
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/get-title@latest

    # Gf
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/gf@latest

    # Github-Endpoints
    go get -u -v -ldflags="-s -w" github.com/gwen001/github-endpoints@latest

    # Github-Subdomains
    go get -u -v -ldflags="-s -w" github.com/gwen001/github-subdomains@latest

    # GoBuster
    go get -u -v -ldflags="-s -w" github.com/OJ/gobuster@latest

    # GoLinkFinder
    go get -u -v -ldflags="-s -w" github.com/0xsha/GoLinkFinder@latest

    # GoSpider
    go get -u -v -ldflags="-s -w" github.com/jaeles-project/gospider@latest

    # Gowitness
    go get -u -v -ldflags="-s -w" github.com/sensepost/gowitness@latest

    # Gron
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/gron@latest

    # Gxss
    go get -u -v -ldflags="-s -w" github.com/KathanP19/Gxss@latest

    # Haklistgen
    go get -u -v -ldflags="-s -w" github.com/hakluke/haklistgen@latest

    # Hakrawler
    go get -u -v -ldflags="-s -w" github.com/hakluke/hakrawler@latest

    # HakrevDNS
    go get -u -v -ldflags="-s -w" github.com/hakluke/hakrevdns@latest

    # Haktldextract
    go get -u -v -ldflags="-s -w" github.com/hakluke/haktldextract@latest

    # Haktrails
    go get -u -v -ldflags="-s -w" github.com/hakluke/haktrails@latest

    # Html-tool
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/html-tool@latest

    # HTTProbe
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/httprobe@latest

    # HTTPx
    go get -u -v -ldflags="-s -w" github.com/projectdiscovery/httpx/cmd/httpx@latest

    # InScope
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/inscope@latest

    # Interactsh
    go get -u -v -ldflags="-s -w" github.com/projectdiscovery/interactsh/cmd/interactsh-client@latest

    # Jsubfinder
    go get -u -v -ldflags="-s -w" github.com/hiddengearz/jsubfinder@latest

    # Kxss
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/kxss@latest

    # Meg
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/meg@latest

    # Metabigor
    go get -u -v -ldflags="-s -w" github.com/j3ssie/metabigor@latest

    # OtxURLs
    go get -u -v -ldflags="-s -w" github.com/lc/otxurls@latest

    # PureDNS
    go get -u -v -ldflags="-s -w" github.com/d3mondev/puredns/v2@latest

    # Purl
    go get -u -v -ldflags="-s -w" github.com/a3kSec/purl@latest

    # Qsreplace
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/qsreplace@latest

    # Rescope
    go get -u -v -ldflags="-s -w" github.com/root4loot/rescope@latest

    # Rush
    go get -u -v -ldflags="-s -w" github.com/shenwei356/rush@latest

    # ShuffleDNS
    go get -u -v -ldflags="-s -w" github.com/projectdiscovery/shuffledns@latest

    # Subfinder
    go get -u -v -ldflags="-s -w" github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest

    # Subjack
    go get -u -v -ldflags="-s -w" github.com/haccer/subjack@latest

    # SubJS
    go get -u -v -ldflags="-s -w" github.com/lc/subjs@latest

    # ToJSON
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/tojson@latest

    # Tok
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/hacks/tok@latest

    # Unew
    go get -u -v -ldflags="-s -w" github.com/dwisiswant0/unew@latest

    # Unfurl
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/unfurl@latest

    # URLprobe
    go get -u -v -ldflags="-s -w" github.com/1ndianl33t/urlprobe@latest

    # WaybackURLs
    go get -u -v -ldflags="-s -w" github.com/tomnomnom/waybackurls@latest

    clear
}

function rust_tools(){
    echo "${bold}${green}[+] Installing rust tools...${reset}" 
    sleep 2;
    
    # FeroxBuster
    /root/.cargo/bin/cargo install feroxbuster

    # Rustscan
    /root/.cargo/bin/cargo install rustscan

    # X8
    /root/.cargo/bin/cargo install x8

    clear
}

function github_tools(){
    echo "${bold}${green}[+] Installing github tools...${reset}" 
    sleep 2;
    
    # ASNLookup
    mkdir /root/tools/asnlookup && git clone https://github.com/yassineaboukir/Asnlookup /root/tools/asnlookup

    # Byp4xx
    mkdir /root/tools/byp4xx && git clone https://github.com/lobuhi/byp4xx /root/tools/byp4xx

    # Collector
    mkdir /root/tools/bbtz; wget https://raw.githubusercontent.com/m4ll0k/BBTz/master/collector.py -O /root/tools/bbtz/collector.py; chmod +x /root/tools/bbtz/collector.py

    # Commix
    mkdir /root/tools/commix && git clone https://github.com/commixproject/commix /root/tools/commix

    # Corsy
    mkdir /root/tools/corsy && git clone https://github.com/s0md3v/Corsy /root/tools/corsy

    # Ctfr
    mkdir /root/tools/ctfr && git clone https://github.com/UnaPibaGeek/ctfr /root/tools/ctfr

    # DNSGen
    mkdir /root/tools/dnsgen && git clone https://github.com/ProjectAnte/dnsgen /root/tools/dnsgen

    # DNSprobe
    mkdir /root/tools/dnsprobe && git clone https://github.com/projectdiscovery/dnsprobe /root/tools/dnsprobe && cd /root/tools/dnsprobe; go build -ldflags="-s -w" .; mv dnsprobe /root/go/bin/dnsprobe

    # DNSvalidator
    mkdir /root/tools/dnsvalidator && git clone https://github.com/vortexau/dnsvalidator /root/tools/dnsvalidator

    # FavFreak
    mkdir /root/tools/favfreak && git clone https://github.com/devanshbatham/FavFreak /root/tools/favfreak 

    # Favihash
    mkdir /root/tools/bbtz; wget https://raw.githubusercontent.com/m4ll0k/BBTz/master/favihash.py -O /root/tools/bbtz/favihash.py; chmod +x /root/tools/bbtz/favihash.py

    # Findomain
    mkdir /root/tools/findomain && git clone https://github.com/Findomain/Findomain /root/tools/findomain && cd /root/tools/findomain && /root/.cargo/bin/cargo build --release && mv /root/tools/findomain/target/release/findomain /usr/bin/findomain

    # GetJSWords
    mkdir /root/tools/bbtz; wget https://raw.githubusercontent.com/m4ll0k/BBTz/master/getjswords.py -O /root/tools/bbtz/getjswords.py; chmod +x /root/tools/bbtz/getjswords.py

    # GetPaths
    mkdir /root/tools/bbtz; wget https://raw.githubusercontent.com/m4ll0k/BBTz/master/getPaths.py -O /root/tools/bbtz/getPaths.py; chmod +x /root/tools/bbtz/getPaths.py

    # Gf-Patterns
    mkdir /root/tools/gf-patterns && git clone https://github.com/1ndianl33t/Gf-Patterns /root/tools/gf-patterns && mkdir ~/.gf && mv /root/tools/gf-patterns/*.json ~/.gf

    # GitDorker
    mkdir /root/tools/gitdorker && git clone https://github.com/obheda12/GitDorker /root/tools/gitdorker 

    # Github-Search
    mkdir /root/tools/github-search && git clone https://github.com/gwen001/github-search /root/tools/github-search

    # HostHunter
    mkdir /root/tools/hosthunter && git clone https://github.com/SpiderLabs/HostHunter /root/tools/hosthunter

    # JSMon
    mkdir /root/tools/jsmon && git clone https://github.com/robre/jsmon /root/tools/jsmon

    # JSParser
    mkdir /root/tools/jsparser && git clone https://github.com/nahamsec/JSParser /root/tools/jsparser

    # JSScanner
    mkdir /root/tools/jsscanner && git clone https://github.com/0x240x23elu/JSScanner /root/tools/jsscanner

    # KiteRunner
    mkdir /root/tools/kiterunner && git clone https://github.com/assetnote/kiterunner /root/tools/kiterunner && cd /root/tools/kiterunner/cmd/kiterunner && go build -u -v -ldflags="-s -w" .; mv kiterunner /root/go/bin/kiterunner

    # LinkFinder
    mkdir /root/tools/linkfinder && git clone https://github.com/GerbenJavado/LinkFinder /root/tools/linkfinder && cd /root/tools/linkfinder && python3 setup.py install

    # MassDNS
    mkdir /root/tools/massdns && git clone https://github.com/blechschmidt/massdns /root/tools/massdns; cd /root/tools/massdns && make; cd bin; mv massdns /usr/local/bin/massdns

    # Naabu
    mkdir /root/tools/naabu && git clone https://github.com/projectdiscovery/naabu.git /root/tools/naabu; cd /root/tools/naabu/v2/cmd/naabu; go build -u -v -ldflags="-s -w" .; mv naabu /root/go/bin/naabu

    # Notify
    mkdir /root/tools/notify && git clone https://github.com/projectdiscovery/notify.git /root/tools/notify; cd /root/tools/notify/cmd/notify; go build -u -v -ldflags="-s -w" .; mv notify /root/go/bin/notify; cd /root/tools/notify/cmd/intercept; go build -u -v -ldflags="-s -w" .; mv intercept /root/go/bin/intercept

    # Nuclei
    mkdir /root/tools/nuclei && git clone https://github.com/projectdiscovery/nuclei /root/tools/nuclei && cd /root/tools/nuclei/v2/cmd/nuclei; go build -u -v -ldflags="-s -w" .; mv nuclei /root/go/bin/nuclei; nuclei -update-templates

    # OpenRedireX
    mkdir /root/tools/openredirex && git clone https://github.com/devanshbatham/openredirex /root/tools/openredirex

    # ParamSpider
    mkdir /root/tools/paramspider && git clone https://github.com/devanshbatham/ParamSpider /root/tools/paramspider

    # ScriptHunter
    mkdir /root/tools/scripthunter && git clone https://github.com/robre/scripthunter /root/tools/scripthunter

    # SecretFinder
    mkdir /root/tools/secretfinder && git clone https://github.com/m4ll0k/SecretFinder /root/tools/secretfinder
    
    # Sublert
    mkdir /root/tools/sublert && git clone https://github.com/yassineaboukir/sublert /root/tools/sublert 

    # TestSSL
    mkdir /root/tools/testssl && git clone https://github.com/drwetter/testssl.sh /root/tools/testssl 

    # The_s3_Bucketeers
    mkdir /root/tools/teh_s3_bucketeers && git clone https://github.com/tomdev/teh_s3_bucketeers /root/tools/teh_s3_bucketeers

    # Virtual-Host-Discovery
    mkdir /root/tools/virtual-host-discovery && git clone https://github.com/jobertabma/virtual-host-discovery /root/tools/virtual-host-discovery

    # XSStrike
    mkdir /root/tools/xsstrike && git clone https://github.com/s0md3v/XSStrike /root/tools/xsstrike

    clear
}

function req_and_bin(){
    echo "${bold}${purple}[+] Installing requirements and compressing binaries...${reset}"
    sleep 2; 
    find /root/tools/ -name requirements.txt | xargs -I@ sh -c 'pip3 install -r @'
    upx /root/go/bin/*
}

function modules(){
    echo
    working_environment
    system_update
    essential_programs
    utilities_and_libraries
    development_tools
    environment_variables
    gui_tools
    apt_tools
    pip_tools
    go_tools
    rust_tools
    github_tools
    req_and_bin
    echo
}

main(){
    modules
    system_update
    echo "${bold}[~] The process was done.${reset}"
    echo
    tput cnorm
    exit 0
}

banner

if [ $# -ge 1 ]; then
    echo -e "${bold}${red}\n[!] You supplied more than 1 argument.${reset}"
    echo -e "Usage: sudo ./BUGBOUNYtools.sh\n"
    tput cnorm; exit 1
else
    if [ $# -eq 0 ]; then
        if [ "$EUID" -ne 0 ]; then
            echo -e "${bold}${red}\n[!] Please run as root.\n${reset}"
            tput cnorm; exit 1
        else
            if [ "$EUID" -ne 1 ]; then
                main
            fi
        fi
    fi
fi
